"""시드 데이터 초기화 — 정적 참조 테이블(역량군/역량/시나리오/교육과정)만 SQLite에 저장."""
import os, sys
sys.path.insert(0, os.path.dirname(__file__))
from models import get_db, init_db, DB_PATH

def seed():
    if os.path.exists(DB_PATH):
        os.remove(DB_PATH)
    init_db()
    conn = get_db()

    # 역량군 (7개)
    groups = [
        ("핵심역량", None),
        ("리더십", "신진"),
        ("리더십", "중견"),
        ("리더십", "리더"),
        ("직무역량", "연구직"),
        ("직무역량", "행정직"),
        ("직무역량", "연구관리직"),
    ]
    conn.executemany("INSERT INTO competency_groups (name, sub_category) VALUES (?, ?)", groups)

    # 역량 (37개)
    competencies = [
        # 핵심역량 (group 1) - 7개
        (1,"의사소통","다양한 이해관계자와 효과적으로 정보를 교환하고 협력하는 능력"),
        (1,"문제해결","복잡한 문제를 분석하고 창의적인 해결책을 도출하는 능력"),
        (1,"창의혁신","새로운 아이디어를 발굴하고 혁신적인 방법을 적용하는 능력"),
        (1,"팀워크","팀 구성원과 협력하여 공동 목표를 달성하는 능력"),
        (1,"자기개발","지속적으로 학습하고 전문성을 향상시키는 능력"),
        (1,"윤리의식","연구윤리와 직업윤리를 준수하며 책임감 있게 행동하는 능력"),
        (1,"글로벌역량","국제적 환경에서 소통하고 협력하는 능력"),
        # 리더십-신진 (group 2) - 4개
        (2,"셀프리더십","자기 목표를 설정하고 주도적으로 업무를 수행하는 능력"),
        (2,"팔로워십","조직의 목표에 공감하고 리더를 효과적으로 보좌하는 능력"),
        (2,"네트워킹","연구 네트워크를 구축하고 협력 관계를 형성하는 능력"),
        (2,"시간관리","업무의 우선순위를 파악하고 효율적으로 시간을 배분하는 능력"),
        # 리더십-중견 (group 3) - 4개
        (3,"프로젝트리더십","연구 프로젝트를 기획하고 팀을 이끄는 능력"),
        (3,"멘토링","후배 연구자를 지도하고 성장을 돕는 능력"),
        (3,"갈등관리","조직 내 갈등을 조정하고 건설적으로 해결하는 능력"),
        (3,"전략적사고","중장기적 관점에서 연구 방향을 설정하는 능력"),
        # 리더십-리더 (group 4) - 4개
        (4,"비전제시","조직의 미래 방향을 설정하고 구성원에게 공유하는 능력"),
        (4,"조직관리","연구조직의 인력, 예산, 자원을 효과적으로 관리하는 능력"),
        (4,"변화관리","조직의 혁신과 변화를 이끌고 저항을 관리하는 능력"),
        (4,"의사결정","불확실한 상황에서 합리적이고 신속한 의사결정을 내리는 능력"),
        # 직무역량-연구직 (group 5) - 7개
        (5,"연구설계","연구 목표에 맞는 실험 및 조사를 설계하는 능력"),
        (5,"데이터분석","연구 데이터를 수집, 처리, 분석하는 능력"),
        (5,"논문작성","연구 결과를 체계적으로 정리하고 학술논문으로 작성하는 능력"),
        (5,"연구비관리","연구비를 효율적으로 계획하고 집행하는 능력"),
        (5,"지식재산관리","특허, 기술이전 등 연구 성과의 지식재산을 관리하는 능력"),
        (5,"실험실안전","실험실 안전 규정을 숙지하고 안전하게 연구를 수행하는 능력"),
        (5,"최신기술동향","해당 분야의 최신 연구 동향과 기술 트렌드를 파악하는 능력"),
        # 직무역량-행정직 (group 6) - 5개
        (6,"정책기획","과학기술 정책을 분석하고 기획하는 능력"),
        (6,"예산관리","조직의 예산을 편성하고 효율적으로 관리하는 능력"),
        (6,"성과관리","조직 및 개인의 성과를 측정하고 관리하는 능력"),
        (6,"행정법규이해","관련 법규와 규정을 이해하고 업무에 적용하는 능력"),
        (6,"대외협력","외부 기관 및 이해관계자와의 협력을 조율하는 능력"),
        # 직무역량-연구관리직 (group 7) - 6개
        (7,"과제기획","국가R&D 과제를 기획하고 공모를 설계하는 능력"),
        (7,"과제평가","연구과제의 진행 상황과 성과를 평가하는 능력"),
        (7,"기술사업화","연구 성과를 산업에 적용하고 사업화를 지원하는 능력"),
        (7,"연구관리시스템","R&D 관리 시스템(IRIS 등)을 활용하는 능력"),
        (7,"이해관계자관리","연구자, 산업계, 정부 등 다양한 이해관계자를 관리하는 능력"),
        (7,"성과확산","연구 성과를 홍보하고 사회적 활용을 촉진하는 능력"),
    ]
    conn.executemany("INSERT INTO competencies (group_id, name, description) VALUES (?, ?, ?)", competencies)

    # 시나리오 (9개: 핵심3 + 리더십3 + 직무3)
    scenarios = [
        (1,"당신은 다부처 공동 연구과제에 참여하게 되었습니다. 서로 다른 전공과 배경을 가진 연구자들이 모여 하나의 목표를 달성해야 합니다. 첫 번째 회의에서 연구 방향에 대한 의견이 크게 엇갈리고 있으며, 해외 공동연구기관과의 협력도 필요한 상황입니다."),
        (1,"연구 과정에서 예상치 못한 실험 결과가 나왔습니다. 기존 가설과 상반되는 데이터이며, 이를 어떻게 해석하고 활용할지 결정해야 합니다. 동시에 학회 발표 마감이 다가오고 있어 빠른 판단이 필요합니다. 연구윤리 측면에서의 고려도 필요합니다."),
        (1,"소속 기관에서 연구 성과의 사회적 환원을 강조하고 있습니다. 당신의 연구 결과를 일반 시민과 정책결정자에게 효과적으로 전달해야 하며, 국제 학술대회에서 발표할 기회도 주어졌습니다. 이를 위해 어떤 역량이 필요하다고 느끼십니까?"),
        (2,"신진연구자로서 처음으로 소규모 연구팀(3명)의 서브리더를 맡게 되었습니다. 선배 연구자의 지시를 따르면서도 팀원들과 효율적으로 업무를 분배해야 합니다. 프로젝트 마감이 촉박하며, 외부 연구자와의 교류 기회가 생겼습니다."),
        (3,"중견연구자로서 대형 연구과제의 책임연구원을 맡고 있습니다. 팀 내 신진연구자와 경력연구원 사이에 연구 방법론에 대한 갈등이 발생했습니다. 동시에 기관 차원의 중장기 연구 전략 수립에 참여해야 하는 상황입니다."),
        (4,"연구소장으로서 기관의 비전을 재정립해야 하는 시점입니다. 정부의 R&D 예산 삭감으로 조직 구조조정이 필요하며, 새로운 연구 분야로의 전환을 추진해야 합니다. 구성원들의 불안감을 해소하면서 변화를 이끌어야 합니다."),
        (5,"3년차 연구원으로서 독립적인 연구 과제를 수행하고 있습니다. 실험 데이터를 분석하여 SCI 논문을 작성해야 하며, 동시에 연구비 중간정산과 특허출원 준비를 해야 합니다. 최근 해당 분야에서 새로운 분석 기법이 등장하여 적용 여부를 검토 중입니다."),
        (6,"과학기술 전문기관의 정책기획팀에서 근무하고 있습니다. 새로운 R&D 지원 사업을 기획해야 하며, 관련 법규 개정 사항을 반영해야 합니다. 예산 편성 시기와 맞물려 부서 간 예산 조율이 필요하고, 연구현장의 의견을 수렴하여 성과지표를 설계해야 합니다."),
        (7,"국가R&D 과제 관리를 담당하고 있습니다. 올해 신규 과제 기획부터 진행 중인 과제의 중간평가, 그리고 완료 과제의 성과 확산까지 동시에 진행해야 합니다. 연구관리시스템 개편도 예정되어 있어 연구자, 산업계 의견을 수렴해야 합니다."),
    ]
    conn.executemany("INSERT INTO scenarios (group_id, situation) VALUES (?, ?)", scenarios)

    # 시나리오-역량 매핑
    scenario_comps = [
        (1,1),(1,4),(1,7),(1,2),
        (2,2),(2,3),(2,6),(2,5),
        (3,1),(3,7),(3,3),(3,5),
        (4,8),(4,9),(4,10),(4,11),
        (5,12),(5,13),(5,14),(5,15),
        (6,16),(6,17),(6,18),(6,19),
        (7,20),(7,21),(7,22),(7,23),(7,24),(7,26),
        (8,27),(8,28),(8,29),(8,30),(8,31),
        (9,32),(9,33),(9,34),(9,35),(9,36),(9,37),
    ]
    conn.executemany("INSERT INTO scenario_competencies (scenario_id, competency_id) VALUES (?, ?)", scenario_comps)

    # 교육과정 (역량당 3개, 총 111개)
    courses = [
        (1,"과학커뮤니케이션 기초","비전문가를 위한 과학 소통 기법",16,"상반기"),
        (1,"협상과 설득의 기술","연구 협력 상황에서의 커뮤니케이션 전략",8,"하반기"),
        (1,"프레젠테이션 스킬 향상","효과적인 연구 발표 기법과 시각화",12,"상시"),
        (2,"시스템적 사고와 문제해결","복잡한 연구 문제를 구조화하는 방법론",16,"상반기"),
        (2,"디자인씽킹 워크숍","사용자 중심 문제해결 프레임워크",8,"하반기"),
        (2,"데이터 기반 의사결정","정량적 분석을 통한 합리적 문제해결",12,"상시"),
        (3,"연구혁신 방법론","연구에서의 창의적 사고와 혁신 전략",16,"상반기"),
        (3,"융합연구 설계","학제간 융합을 통한 혁신적 연구 접근",12,"하반기"),
        (3,"오픈이노베이션 실무","개방형 혁신의 이론과 실제 적용",8,"상시"),
        (4,"연구팀 협업 워크숍","효과적인 팀 빌딩과 협업 방법론",8,"상반기"),
        (4,"다학제 공동연구 실무","다양한 분야 연구자와의 협력 기술",12,"하반기"),
        (4,"온라인 협업 도구 활용","원격 환경에서의 효율적 팀 협업 기술",4,"상시"),
        (5,"경력개발 전략 수립","과학기술인을 위한 체계적 경력 관리",8,"상반기"),
        (5,"학습 방법론과 자기주도학습","효율적 학습 전략과 지식 관리",12,"하반기"),
        (5,"연구자 브랜딩","개인 연구 브랜드 구축 및 관리",4,"상시"),
        (6,"연구윤리 심화과정","연구부정행위 예방과 책임 있는 연구 수행",16,"상반기"),
        (6,"데이터 윤리와 개인정보보호","연구 데이터의 윤리적 수집과 관리",8,"하반기"),
        (6,"기술윤리와 사회적 책임","과학기술의 사회적 영향과 윤리적 판단",12,"상시"),
        (7,"국제학술논문 작성법","영어 논문 작성과 국제 학술지 투고 전략",16,"상반기"),
        (7,"국제 공동연구 실무","해외 연구기관과의 협력 프로토콜과 문화 이해",12,"하반기"),
        (7,"글로벌 연구 네트워킹","국제 학회 참여와 글로벌 네트워크 구축",8,"상시"),
        (8,"신진연구자 셀프리더십","자기 목표 설정과 동기부여 전략",8,"상반기"),
        (8,"연구자 자기관리","스트레스 관리와 번아웃 예방",4,"하반기"),
        (8,"주도적 업무 수행 전략","자율성과 책임감을 갖춘 업무 수행",8,"상시"),
        (9,"효과적인 팔로워십","리더를 보좌하고 조직에 기여하는 방법",8,"상반기"),
        (9,"조직 적응과 소통","신진연구자의 조직 내 역할 이해와 적응",4,"하반기"),
        (9,"업무 보고와 피드백","효과적인 보고서 작성과 피드백 수용",8,"상시"),
        (10,"연구자 네트워크 구축","학술 커뮤니티 참여와 인맥 관리",8,"상반기"),
        (10,"학회 참여 전략","학회에서의 효과적인 교류와 발표",4,"하반기"),
        (10,"온라인 학술 네트워킹","소셜미디어와 플랫폼을 활용한 네트워킹",4,"상시"),
        (11,"연구자를 위한 시간관리","연구, 행정, 교육 업무의 효율적 배분",8,"상반기"),
        (11,"업무 우선순위 설정","중요도와 긴급도 기반의 업무 관리",4,"하반기"),
        (11,"생산성 향상 도구 활용","프로젝트 관리 도구와 일정 관리 기법",4,"상시"),
        (12,"연구 프로젝트 리더십","연구팀을 이끄는 리더의 역할과 역량",16,"상반기"),
        (12,"프로젝트 관리 방법론","연구과제의 범위, 일정, 품질 관리",12,"하반기"),
        (12,"팀 동기부여와 성과관리","팀원의 잠재력을 끌어내는 리더십 기법",8,"상시"),
        (13,"연구 멘토링 실무","후배 연구자 지도를 위한 멘토링 기법",12,"상반기"),
        (13,"코칭 리더십","질문과 경청 기반의 코칭 스킬",8,"하반기"),
        (13,"연구지도 역량 강화","학위과정 지도와 연구 방향 설정 지원",16,"상시"),
        (14,"조직 갈등 해결 전략","연구조직 내 갈등의 유형별 해결 방법",8,"상반기"),
        (14,"협상과 중재의 기술","이해관계 조정과 합의 도출 기법",12,"하반기"),
        (14,"건설적 피드백 기법","갈등 예방을 위한 효과적 피드백 방법",4,"상시"),
        (15,"연구 전략 수립","중장기 연구 방향 설정과 전략 기획",16,"상반기"),
        (15,"기술로드맵 작성","기술 동향 분석과 연구 로드맵 설계",12,"하반기"),
        (15,"전략적 의사결정","불확실성 하에서의 연구 방향 결정 기법",8,"상시"),
        (16,"조직 비전 수립과 공유","연구조직의 비전 설계와 구성원 소통",16,"상반기"),
        (16,"미래예측과 전략적 리더십","기술 트렌드 기반의 조직 방향 설정",12,"하반기"),
        (16,"스토리텔링 리더십","비전을 효과적으로 전달하는 소통 기법",8,"상시"),
        (17,"연구조직 관리론","연구기관의 조직 구조와 인력 관리",16,"상반기"),
        (17,"예산과 자원 관리","제한된 자원의 효율적 배분과 관리",12,"하반기"),
        (17,"성과기반 조직 운영","KPI 설정과 성과 평가 시스템 운영",8,"상시"),
        (18,"조직 변화관리 전략","변화에 대한 저항 극복과 혁신 추진",16,"상반기"),
        (18,"디지털 전환 리더십","연구환경의 디지털 전환을 이끄는 리더십",12,"하반기"),
        (18,"조직문화 혁신","창의적이고 개방적인 연구문화 조성",8,"상시"),
        (19,"과학적 의사결정","데이터와 근거 기반의 합리적 의사결정",12,"상반기"),
        (19,"위기관리와 의사결정","긴급 상황에서의 신속한 판단과 대응",8,"하반기"),
        (19,"합의형 의사결정","다양한 이해관계를 고려한 민주적 의사결정",8,"상시"),
        (20,"연구방법론 심화","정량/정성 연구 설계의 이론과 실제",16,"상반기"),
        (20,"실험설계와 통계","과학적 실험 설계와 통계 분석 기초",12,"하반기"),
        (20,"연구제안서 작성법","설득력 있는 연구계획서 작성 전략",8,"상시"),
        (21,"연구 데이터 분석 실무","Python/R을 활용한 연구 데이터 분석",24,"상반기"),
        (21,"빅데이터 분석 기초","대용량 연구 데이터 처리와 분석 기법",16,"하반기"),
        (21,"AI/ML 연구 활용","인공지능 기법의 연구 적용 방법",20,"상시"),
        (22,"SCI 논문작성 실무","국제 학술지 투고를 위한 논문 작성법",16,"상반기"),
        (22,"학술적 글쓰기","논리적이고 체계적인 학술 문서 작성",12,"하반기"),
        (22,"피어리뷰 대응 전략","심사위원 의견 대응과 논문 수정 전략",4,"상시"),
        (23,"연구비 관리 실무","국가R&D 연구비 집행 규정과 실무",8,"상반기"),
        (23,"연구비 정산과 감사","연구비 정산 절차와 감사 대응 방법",4,"하반기"),
        (23,"연구비 예산 편성","효율적인 연구비 계획과 편성 전략",8,"상시"),
        (24,"특허출원 기초","연구 성과의 특허 출원 절차와 전략",8,"상반기"),
        (24,"기술이전과 라이선싱","연구 성과의 산업 이전과 계약 실무",12,"하반기"),
        (24,"지식재산 포트폴리오 관리","체계적인 IP 관리와 활용 전략",8,"상시"),
        (25,"실험실 안전교육","실험실 안전 규정과 사고 예방",8,"상반기"),
        (25,"화학물질 안전관리","유해물질 취급과 안전 관리 실무",4,"하반기"),
        (25,"안전사고 대응 매뉴얼","실험실 사고 시 응급 대응과 보고 절차",4,"상시"),
        (26,"기술동향 분석 방법론","체계적 기술 정보 수집과 분석 기법",8,"상반기"),
        (26,"미래기술 예측과 활용","기술 전망과 연구 전략에의 반영",12,"하반기"),
        (26,"기술정보 DB 활용","특허DB, 논문DB 등 기술정보원 활용법",4,"상시"),
        (27,"과학기술 정책 분석","국가 과학기술 정책의 이해와 분석",16,"상반기"),
        (27,"정책기획 실무","R&D 지원사업 기획과 설계 방법론",12,"하반기"),
        (27,"근거기반 정책수립","데이터와 증거에 기반한 정책 개발",8,"상시"),
        (28,"공공부문 예산관리","정부 예산 편성과 집행의 이해",12,"상반기"),
        (28,"R&D 예산 분석","연구개발 예산의 분석과 효율적 배분",8,"하반기"),
        (28,"재정관리 실무","재정 규정과 회계 처리 실무",8,"상시"),
        (29,"R&D 성과평가 방법론","연구개발 성과의 측정과 평가 체계",12,"상반기"),
        (29,"성과지표 설계","효과적인 KPI와 성과지표 설계 방법",8,"하반기"),
        (29,"성과관리 시스템 운영","성과 데이터 수집과 보고 체계 구축",8,"상시"),
        (30,"과학기술 관련법규","과학기술기본법, 연구개발혁신법 등의 이해",12,"상반기"),
        (30,"행정절차와 규제","행정절차법과 규제영향분석 실무",8,"하반기"),
        (30,"법규 개정 동향 분석","관련 법규 개정 사항의 모니터링과 대응",4,"상시"),
        (31,"기관 간 협력 실무","공공기관 간 협력 체계 구축과 운영",8,"상반기"),
        (31,"이해관계자 소통","다양한 이해관계자와의 효과적 소통 전략",8,"하반기"),
        (31,"국제협력 실무","해외 기관과의 협력 사업 기획과 운영",12,"상시"),
        (32,"국가R&D 과제기획","신규 R&D 과제의 기획과 공모 설계",16,"상반기"),
        (32,"수요조사와 과제발굴","현장 수요 기반의 연구과제 발굴 방법",8,"하반기"),
        (32,"RFP 작성 실무","연구과제 공고문 작성과 평가기준 설계",8,"상시"),
        (33,"R&D 과제 평가론","연구과제 선정, 중간, 최종 평가 방법론",12,"상반기"),
        (33,"평가위원회 운영","공정하고 전문적인 평가위원회 구성과 운영",8,"하반기"),
        (33,"평가결과 환류","평가 결과의 분석과 정책 반영 방법",8,"상시"),
        (34,"기술사업화 전략","연구 성과의 사업화 전략 수립과 실행",16,"상반기"),
        (34,"기술가치평가","기술의 경제적 가치 평가와 거래 실무",12,"하반기"),
        (34,"창업과 기술벤처","연구 기반 창업과 기술 스타트업 지원",8,"상시"),
        (35,"IRIS 시스템 활용","국가연구개발정보시스템 활용 실무",8,"상반기"),
        (35,"연구관리 디지털 전환","연구관리 업무의 디지털화와 자동화",12,"하반기"),
        (35,"연구데이터 관리체계","연구 데이터의 체계적 수집과 관리 방법",8,"상시"),
        (36,"R&D 이해관계자 관리","연구자, 산업계, 정부 간 소통과 조율",12,"상반기"),
        (36,"갈등조정과 합의형성","다양한 이해관계 간 갈등 해소 방법",8,"하반기"),
        (36,"커뮤니케이션 전략","이해관계자별 맞춤형 소통 전략 수립",8,"상시"),
        (37,"연구성과 홍보전략","연구 성과의 효과적 홍보와 확산 방법",8,"상반기"),
        (37,"기술설명회 운영","산업계 대상 기술이전 설명회 기획과 운영",8,"하반기"),
        (37,"사회적 가치 확산","연구 성과의 사회적 활용과 가치 창출",12,"상시"),
    ]
    conn.executemany(
        "INSERT INTO courses (competency_id, name, description, duration_hours, semester) VALUES (?, ?, ?, ?, ?)",
        courses
    )
    conn.commit()
    conn.close()
    print(f"시드 데이터 삽입 완료: {DB_PATH}")

if __name__ == "__main__":
    seed()
